int cstr_fgets(c_string*s,FILE*const stream){size_t i=0;int ch;while ((ch=getc(stream))!=EOF && ch!='\n'){if (i==s->capa - 1){s->capa<<=1ull;s->data=(char*)realloc(s->data,s->capa*sizeof(char));if (s->data==NULL){return -1;}}s->data[i++]=(char)ch;}if (ch=='\n'){s->data[i++]='\n';}s->data[i]='\0';return i;}bool cstr_pop(c_string*s){size_t len=cstrlen(s);if (len==0){return true;}s->data[len - 1]='\0';return false;}bool cstr_fill(c_string*a,size_t start,const c_string*b){size_t sz1=cstrlen(a),sz2=cstrlen(b);if (sz1 - start < sz2){return true;}memcpy(a->data + start,b->data,sz2*sizeof(char) );return false;}bool cstr_reserve(c_string*s,size_t start,size_t length){size_t sz=cstrlen(s),sz2=sz + length + 1;if (sz2 > s->capa){char*new_data=(char*)realloc(s->data,sz2*sizeof(char) );if (new_data==NULL){return true;}s->capa=sz2;s->data=new_data;}if (sz - start < length){memset(s->data + sz,s->data[start],length + start - sz);}size_t sz_start=sz - start;for (size_t i=0; i < sz_start; ++i){s->data[sz - i - 1 + length]=s->data[sz - i - 1];}s->data[sz + length]='\0';return false;}bool cstr_reserve_cpy(c_string *s,size_t start,const c_string *a){size_t length = cstrlen(a),sz = cstrlen(s),sz2 = sz + length + 1;if (sz2 > s->capa){char *new_data = (char *)realloc(s->data,sz2 * sizeof(char) );if (new_data == NULL){return true;}s->capa = sz2;s->data = new_data;}size_t sz_start = sz - start;for (size_t i = 0; i < sz_start; ++i){s->data[sz - i - 1 + length] = s->data[sz - i - 1];}s->data[sz + length] = '\0';memcpy(s->data + start,a->data,length);return false;}bool cstr_delete(c_string *s,size_t start,size_t length){size_t sz = cstrlen(s);if (start >= sz || start + length > sz){return true;}size_t startplength = start + length;for (size_t i = startplength; i < sz; ++i){s->data[i - length] = s->data[i];}s->data[sz - length] = '\0';}